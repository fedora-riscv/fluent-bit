From b37288fa4d74e6264147af7ac1e220d1ad64032c Mon Sep 17 00:00:00 2001
From: Benjamin Kircher <bkircher@0xadd.de>
Date: Wed, 21 Apr 2021 10:13:29 +0200
Subject: [PATCH 2/5] CMake: fix up install paths

Signed-off-by: Ben Kircher <bkircher@0xadd.de>

diff --git a/CMakeLists.txt b/CMakeLists.txt
index ec42f9412..91122a0f2 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -797,9 +797,9 @@ if(${CMAKE_SYSTEM_NAME} MATCHES "Windows")
   set(FLB_INSTALL_INCLUDEDIR "include")
 else()
   set(FLB_INSTALL_BINDIR ${CMAKE_INSTALL_FULL_BINDIR})
-  set(FLB_INSTALL_LIBDIR "${CMAKE_INSTALL_LIBDIR}/${FLB_OUT_NAME}")
-  set(FLB_INSTALL_CONFDIR "${CMAKE_INSTALL_SYSCONFDIR}/${FLB_OUT_NAME}/")
-  set(FLB_INSTALL_INCLUDEDIR "${CMAKE_INSTALL_PREFIX}/include")
+  set(FLB_INSTALL_LIBDIR ${CMAKE_INSTALL_FULL_LIBDIR})
+  set(FLB_INSTALL_CONFDIR "${CMAKE_INSTALL_FULL_SYSCONFDIR}/${FLB_OUT_NAME}")
+  set(FLB_INSTALL_INCLUDEDIR ${CMAKE_INSTALL_FULL_INCLUDEDIR})
 endif()
 
 # Instruct CMake to build the Fluent Bit Core
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 523e86f80..7047120b2 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -445,7 +445,7 @@ if(FLB_BINARY)
       "${PROJECT_SOURCE_DIR}/init/systemd.in"
       ${FLB_SYSTEMD_SCRIPT}
       )
-    install(FILES ${FLB_SYSTEMD_SCRIPT} COMPONENT binary DESTINATION /lib/systemd/system)
+    install(FILES ${FLB_SYSTEMD_SCRIPT} COMPONENT binary DESTINATION /usr/lib/systemd/system)
     install(DIRECTORY DESTINATION ${FLB_INSTALL_CONFDIR} COMPONENT binary)
   elseif(IS_DIRECTORY /usr/share/upstart)
     set(FLB_UPSTART_SCRIPT "${PROJECT_SOURCE_DIR}/init/${FLB_OUT_NAME}.conf")
-- 
2.34.1

